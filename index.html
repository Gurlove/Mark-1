<!DOCTYPE HTML>
<html>
    <head>
        <!-- Webix CSS file-->  
        <link rel="stylesheet" href="codebase/webix.css" type="text/css">
        <!-- QUnit CSS file-->  
        <link rel="stylesheet" href="qunit/qunit-2.0.1.css">
        <!-- Webix JS file-->    
        <script src="codebase/webix.js" type="text/javascript"></script>  
        <!-- QUnit JS file-->    
        <script src="qunit/qunit-2.0.1.js"></script>
        <!-- Unit Testing JS file-->
        <script src="unittests.js"></script>
    </head>
    <body>
        <!-- QUnit divs to show test results--> 
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>
        <!--link to download salesrecords.csv-->
        <script type="text/javascript" charset="utf-8">
        // main UI (CRUD)
        webix.ui
        ({
            rows: 
            [

                { type:"header", template:"Sales Records" },
 
                {   
                    view:"toolbar", id:"crud", elements:
                    [
                        { view:"button", value:"Add", width: 70},
                        { view:"button", value:"Edit", width: 70},
                    ]
                },

                {
                    view:"datatable", fillspace:1, columns:
                    [
                        { id: "item", header:"Item Name", width:180 },
                        { id: "sales", header:"Sales", width:100 },
                        { id: "saleprice", header:"Sale Price ($)", width:140 },
                        { id: "stockprice", header:"Stock Price ($)", width:140 }
                    ],
                    // loads data from json file
                    select:true,
                    url:"data/data.json"
                },

                { type:"header", template:"Reports" },

                {   
                    view:"toolbar", id:"Reports", elements:
                    [
                        { view:"button", value:"View Sales Report", width: 160, click:"toggle_sales_report"},
                        { view:"button", value:"View Stocktake Report", width: 160},
                    ]
                }
            ]
        }); 

        // sales report window 
        salesreport = new webix.ui
        ({
            view:"window", move:true,
            left:300, top:400,
            head:
            {
                view:"toolbar", id:"salesreport", elements:
                [
                    { type:"header", template:"Monthly Sales Report"},
                    { view:"button", value:"Export", align: 'left', width: 160, click:"export_excel"},
                    { view:"button", value:"Close", align: 'right', width: 160, click:"toggle_sales_report"}
                ]
            },

            body:
            {
                view:"datatable", id:"reporttable",
                columns:
                [
                    { id: "item", header:"Item Name", width:180 },
                    { id: "sales", header:"Sales", width:100 },
                    { id: "profit", header:"Profit ($)", width:140 },
                    { id: "roi", header:"ROI (%)", width:140 }
                ],
                autoheight:true,
                autowidth:true,
                // loads data from json file
                url:'data/data.json'
            }
        })

        // chuck our functions here for organisational purposes

        // toggle sales report window
        function toggle_sales_report()
        {   
            if (salesreport.isVisible())
            {
                salesreport.hide();
            }
            else
            {
                 salesreport.show();
            }
        }

        // export data to csv
        function export_excel()
        {
            
        }

        function add_item()
        {

        }

        </script>
    </body>
</html>